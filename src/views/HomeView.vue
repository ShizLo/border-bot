<template>
  <div class="page-wrapper">
    <v-card class="hero-card" elevation="4">
      <div class="hero-overlay"></div>
      <v-card class="hero-content" elevation="0">
        <div class="d-flex justify-center pt-2">
          <img alt="–†–∞–±–æ—Ç–∞ –ø–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É" class="logo pulse" src="@/assets/IMG_2619.webp" width="160" height="160" />
        </div>
        <h1 class="text-white text-center text-h4 text-md-h3 text-lg-h3 text-xl-h3 mt-2 font-weight-bold">–°–ª—É–∂–±–∞ –≤ –°–æ—Å–Ω–æ–≤–æ–º –±–æ—Ä—É</h1>
        <h3 class="text-center text-white text-subtitle-1 font-weight-medium">–ù–∞–±–æ—Ä –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –Ω–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç</h3>
        <div class="d-flex justify-center align-center pt-1 pb-2">
          <v-icon color="white" class="mr-2">mdi-map-marker-outline</v-icon>
          <p class="text-white mb-0">–≥. –°–æ—Å–Ω–æ–≤—ã–π –ë–æ—Ä, —É–ª. –°–æ–≤–µ—Ç—Å–∫–∞—è, 63</p>
        </div>
        <div class="px-3">
          <v-btn block class="apply-btn" color="primary" size="large" @click="dialogOpen()">
            <v-icon start>mdi-send</v-icon>
            –ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É
          </v-btn>
        </div>
      </v-card>
    </v-card>
    <v-card class="mt-6 video-card" elevation="4">
      <div class="section-header">
        <h2 class="section-title">
          <span class="title-text">–ö–æ–Ω—Ç—Ä–∞–∫—Ç –≤ –õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏</span>
          <span class="title-decoration"></span>
        </h2>
      </div>
      <div class="video-container">
        <video :src="srcVideo" poster="../assets/prev.png" controls muted loop playsinline class="elevation-3">
          <source :src="srcVideo" type="video/mp4" />
        </video>
      </div>
    </v-card>
    <v-row class="features-grid mt-6">
      <v-col cols="12" md="6" class="">
        <v-card class="feature-card h-100" elevation="4">
          <div class="feature-header primary d-flex align-center mt-4 ml-4">
            <v-icon color="black" size="x-large">mdi-compass-outline</v-icon>
            <h3 class="text-black ml-3 text-h5 font-weight-bold mb-0">–û —Å–ª—É–∂–±–µ</h3>
          </div>
          <div class="feature-content px-6">
            <p class="text-body-1 mb-0">
              –°—Ç—Ä–∞–Ω—ã –∑–∞–ø–∞–¥–∞ –Ω–∞—Ä–∞—â–∏–≤–∞—é—Ç –≤–æ–µ–Ω–Ω–æ–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ —É –†–æ—Å—Å–∏–π—Å–∫–∏—Ö –≥—Ä–∞–Ω–∏—Ü. –í –æ—Ç–≤–µ—Ç –Ω–∞ –∏—Ö –Ω–µ–¥—Ä—É–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —à–∞–≥–∏ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω—ã
              –ø—Ä–∏–Ω—è–ª–æ —Ä–µ—à–µ–Ω–∏–µ —É—Å–∏–ª–∏—Ç—å –Ω–∞—à–∏ —Ä—É–±–µ–∂–∏, –≤ —Å–≤—è–∑–∏ —Å —ç—Ç–∏–º, –ü–£ –§–°–ë –†–æ—Å—Å–∏–∏ –ø–æ –≥. –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥—É –∏ –õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏, –æ–±—ä—è–≤–ª—è–µ—Ç
              –Ω–∞–±–æ—Ä –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –Ω–∞ –≤–æ–µ–Ω–Ω—É—é —Å–ª—É–∂–±—É –ø–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É –≤ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –≥—Ä–∞–Ω–∏—Ü—ã. –£—á–∞—Å—Ç–∏–µ –≤ –°–í–û —Ç–æ–ª—å–∫–æ –ø–æ –∂–µ–ª–∞–Ω–∏—é. –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏
              —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–µ—Å—É—Ç —Å–ª—É–∂–±—É –Ω–∞ –≤–æ–∑–¥—É—à–Ω—ã—Ö, –º–æ—Ä—Å–∫–∏—Ö –∏ —Å—É—Ö–æ–ø—É—Ç–Ω—ã—Ö —Ä—É–±–µ–∂–∞—Ö –Ω–∞—à–µ–π –†–æ–¥–∏–Ω—ã —Å –§–∏–Ω–ª—è–Ω–¥—Å–∫–æ–π –∏ –≠—Å—Ç–æ–Ω—Å–∫–æ–π —Ä–µ—Å–ø—É–±–ª–∏–∫–∞–º–∏ –æ–±—â–µ–π
              –ø—Ä–æ—Ç—è–∂–µ–Ω–Ω–æ—Å—Ç—å—é –±–æ–ª–µ–µ 400 –∫–∏–ª–æ–º–µ—Ç—Ä–æ–≤.
            </p>
          </div>
        </v-card>
      </v-col>

      <v-col cols="12" md="6" class="">
        <v-card class="feature-card h-100" elevation="4">
          <div class="feature-header primary d-flex align-center mt-4 ml-4 ml-md-4">
            <v-icon size="x-large" color="black">mdi-briefcase-outline</v-icon>
            <h3 class="text-black ml-3 text-h5 font-weight-bold mb-0">–í–∞–∫–∞–Ω—Å–∏–∏ –ø–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É</h3>
          </div>
          <div class="feature-content pa-0 pa-md-4">
            <v-list class="py-0">
              <v-list-item v-for="(job, index) in jobs" :key="index" class="">
                <div class="d-flex">
                  <v-icon color="primary mr-2">mdi-check-circle</v-icon>
                  <v-list-item-title class="text-body-1 text-wrap">{{ job }}</v-list-item-title>
                </div>
              </v-list-item>
            </v-list>
          </div>
        </v-card>
      </v-col>

      <v-col cols="12" md="6" class="">
        <v-card class="feature-card h-100" elevation="4">
          <div class="feature-header primary d-flex align-center mt-4 ml-4">
            <v-icon size="x-large" color="black">mdi-account-check-outline</v-icon>
            <h3 class="text-black pl-4 text-h5 font-weight-bold mb-0">–£—Å–ª–æ–≤–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞</h3>
          </div>
          <div class="feature-content pa-0 pa-md-4">
            <v-list class="py-0">
              <v-list-item v-for="(condition, index) in conditions" :key="index">
                <div class="d-flex">
                  <v-icon color="primary" class="mr-2">mdi-chevron-right</v-icon>
                  <v-list-item-title class="text-body-1 text-wrap">{{ condition }}</v-list-item-title>
                </div>
              </v-list-item>
            </v-list>
          </div>
        </v-card>
      </v-col>

      <v-col cols="12" md="6" class="">
        <v-card class="feature-card h-100" elevation="4">
          <div class="feature-header primary d-flex align-center mt-4 ml-4">
            <v-icon size="x-large" color="black">mdi-medal-outline</v-icon>
            <h3 class="text-black pl-4 text-h5 font-weight-bold mb-0">–õ—å–≥–æ—Ç—ã –¥–ª—è –≤–æ–µ–Ω–Ω–æ—Å–ª—É–∂–∞—â–∏—Ö</h3>
          </div>
          <div class="feature-content pa-0 pa-md-4">
            <v-list class="py-0">
              <v-list-item v-for="(benefit, index) in benefits" :key="index" class="">
                <div class="d-flex">
                  <v-icon color="primary" class="mr-2">mdi-star-circle</v-icon>

                  <v-list-item-title class="text-body-1 text-wrap" v-html="benefit"></v-list-item-title>
                </div>
              </v-list-item>
            </v-list>
          </div>
        </v-card>
      </v-col>
    </v-row>

    <v-card class="mt-6 process-card" elevation="4">
      <div class="process-header d-flex align-center pa-6 pa-md-8 primary lighten-1">
        <div>
          <h3 class="text-h4 font-weight-bold mb-1">–ü–æ—Ä—è–¥–æ–∫ —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</h3>
          <p class="mb-0 text-caption opacity-80">5 —à–∞–≥–æ–≤ –∫ —É—Å–ø–µ—à–Ω–æ–º—É –∑–∞–∫–ª—é—á–µ–Ω–∏—é –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞</p>
        </div>
      </div>
      <v-stepper v-model="stepperItem" class="elevation-0 stepper-custom" hide-actions>
        <v-divider />
        <v-stepper-header class="elevation-0 px-4 py-2">
          <div v-for="(step, index) in steps">
            <v-stepper-item
              :key="index"
              :title="step.title"
              :subtitle="step.subtitle"
              :editable="index === 0 || !accessStep"
              :complete="index < stepperItem"
              :color="index <= stepperItem ? 'primary' : 'green'"
              :error="accessStep && index > 0"
              :error-icon="accessStep && index > 0 ? 'mdi-lock-outline' : undefined"
              class="text-no-wrap py-4 stepper-item"
            >
            </v-stepper-item>
          </div>
        </v-stepper-header>
        <v-divider />

        <v-stepper-window class="pa-0 ma-1 ma-md-6">
          <v-stepper-window-item value="0">
            <v-card elevation="0" class="process-content">
              <div class="d-flex align-center pl-4 pt-2 pt-md-0 mb-4">
                <v-icon color="primary" large class="mr-2">mdi-file-sign</v-icon>
                <h3 class="text-h5 font-weight-bold primary--text">–ü—Ä–æ—Ü–µ—Å—Å –∑–∞–∫–ª—é—á–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞</h3>
              </div>

              <v-divider class="mb-4" />

              <v-list class="process-steps">
                <v-list-item v-for="(item, index) in processItems" :key="index" class="mb-1 pa-3 rounded-lg step-item">
                  <div class="d-flex">
                    <v-icon color="primary" class="mr-2" large>mdi-numeric-{{ index + 1 }}-circle</v-icon>

                    <v-list-item-title class="text-body-1 font-weight-medium">{{ item }}</v-list-item-title>
                  </div>
                </v-list-item>
              </v-list>

              <v-alert color="red-lighten-5" class="mt-4 mx-4" border="start">
                <div class="d-flex align-center">
                  <v-icon color="red" class="mr-2">mdi-alert-circle-outline</v-icon>
                  <span class="text-caption red--text">–ü–µ—Ä–µ–≤–æ–¥–∞–º–∏ –∏–∑ –¥—Ä—É–≥–∏—Ö –≤–µ–¥–æ–º—Å—Ç–≤ –Ω–µ –∑–∞–Ω–∏–º–∞–µ–º—Å—è</span>
                </div>
              </v-alert>

              <v-dialog v-model="dialog2" max-width="600" persistent>
                <template v-slot:activator="{ props }">
                  <div class="d-flex justify-center">
                    <v-btn
                      @click="startTest()"
                      color="primary"
                      class="my-6"
                      size="large"
                      prepend-icon="mdi-clipboard-text-outline"
                      v-bind="props"
                    >
                      –ù–∞—á–∞—Ç—å –æ–ø—Ä–æ—Å
                    </v-btn>
                  </div>
                </template>
                <v-card class="survey-dialog rounded-xl">
                  <v-card-text class="pa-0">
                    <div class="dialog-header pa-6 bg-primary">
                      <div class="d-flex align-center">
                        <v-icon color="white" large>mdi-clipboard-text</v-icon>
                        <div class="ml-4">
                          <h2 class="text-h5 white--text font-weight-bold">–ü–µ—Ä–≤–∏—á–Ω—ã–π –æ–ø—Ä–æ—Å</h2>
                          <div class="text-caption white--text opacity-85">–í–æ–ø—Ä–æ—Å {{ numberQuestion + 1 }} –∏–∑ {{ questions.length }}</div>
                        </div>
                      </div>
                      <v-progress-linear
                        :model-value="((numberQuestion + 1) / questions.length) * 100"
                        color="white"
                        height="6"
                        class="mt-4 rounded-lg"
                      />
                    </div>

                    <div class="content-wrapper pa-2 d-flex justify-space-between">
                      <div class="question-block mb-4">
                        <div class="text-h6 font-weight-medium pa-1 pa-md-4 mb-4">
                          {{ questions[numberQuestion].question }}
                        </div>
                      </div>
                      <div>
                        <v-radio-group inline v-model="radioValue" class="d-flex justify-center">
                          <v-radio v-for="(answer, ai) in ['–î–∞', '–ù–µ—Ç']" :key="ai" :value="answer" color="primary" class="">
                            <template v-slot:label>
                              <span class="text-body-1">{{ answer }}</span>
                            </template>
                          </v-radio>
                        </v-radio-group>
                      </div>
                    </div>
                  </v-card-text>

                  <v-card-actions class="pa-4 bg-grey-lighten-4">
                    <v-spacer />
                    <v-btn
                      color="primary"
                      variant="outlined"
                      size="large"
                      :disabled="!radioValue"
                      @click="nextQuestion()"
                      append-icon="mdi-arrow-right"
                    >
                      –î–∞–ª–µ–µ
                    </v-btn>
                  </v-card-actions>
                </v-card>
              </v-dialog>
            </v-card>
          </v-stepper-window-item>
          <v-stepper-window-item value="1">
            <v-card class="px-4 py-3" elevation="0">
              <div class="d-flex justify-space-between align-center">
                <div>
                  <h3 class="text-h6 font-weight-bold primary--text">–í—ã –∏–¥–µ–∞–ª—å–Ω—ã–π –∫–∞–Ω–¥–∏–¥–∞—Ç</h3>
                  <p class="mb-2">–°–≤—è–∑—å —Å –∫—É—Ä–∞—Ç–æ—Ä–æ–º</p>
                </div>
              </div>
              <v-divider></v-divider>
              <div class="mt-3">
                <p class="mb-3">
                  –ï—Å–ª–∏ –í—ã –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω—ã –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º –ø–æ –æ–¥–Ω–æ–π –∏–∑ —Å—Å—ã–ª–æ–∫ –Ω–∏–∂–µ –∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ —Å–≤–æ–∏ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ
                  –¥–∞–Ω–Ω—ã–µ. –° –í–∞–º–∏ —Å–≤—è–∂—É—Ç—Å—è –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.
                </p>
                <v-divider class="my-2"></v-divider>
                <h4 class="mb-2 text-subtitle-1 font-weight-bold">–°—Å—ã–ª–∫–∏ –¥–ª—è —Å–≤—è–∑–∏:</h4>
                <v-list class="contact-list">
                  <v-list-item v-for="(contact, index) in contacts" :key="index" :href="contact.link">
                    <div class="d-flex justify-space-between">
                      <div class="d-flex align-center">
                        <v-icon class="mr-2">{{ contact.icon }}</v-icon>
                        <v-list-item-title>{{ contact.name }}</v-list-item-title>
                      </div>
                      <v-icon>mdi-open-in-new</v-icon>
                    </div>
                  </v-list-item>
                </v-list>
                <v-divider class="mt-3" />
                <div class="d-flex mt-4 contact-form">
                  <v-text-field
                    v-model="contactInfo"
                    :loading="loading"
                    density="comfortable"
                    label="–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏–ª–∏ email"
                    variant="outlined"
                    hide-details
                    single-line
                    @keyup.enter="onClick"
                  ></v-text-field>
                  <v-btn class="ml-2 send-btn" color="primary" @click="onClick">
                    <v-icon>mdi-send</v-icon>
                  </v-btn>
                </div>
              </div>
            </v-card>
          </v-stepper-window-item>
          <v-stepper-window-item value="2">
            <v-card class="px-4 py-3" elevation="0">
              <h3 class="text-h6 font-weight-bold primary--text">–ü–µ—Ä–≤—ã–π —ç—Ç–∞–ø</h3>
              <p class="mb-3">–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</p>
              <v-divider></v-divider>

              <div class="d-flex align-center justify-space-between mt-3">
                <v-list class="documents-list">
                  <v-list-item class="py-0" v-for="(doc, index) in requiredDocs" :key="index">
                    <div class="d-flex">
                      <v-icon class="mr-2" color="primary">mdi-file-document-outline</v-icon>
                      <v-list-item-title>{{ doc }}</v-list-item-title>
                    </div>
                  </v-list-item>
                </v-list>

                <v-menu>
                  <template v-slot:activator="{ props: activatorProps }">
                    <v-btn color="primary" density="comfortable" icon="mdi-download" v-bind="activatorProps"></v-btn>
                  </template>
                  <v-list>
                    <v-list-item v-for="(template, index) in documentTemplates" :key="index" :href="template.link" target="_blank">
                      <div class="d-flex">
                        <v-list-item-title>{{ template.name }}</v-list-item-title>
                        <v-list-item-action>
                          <v-icon>mdi-download</v-icon>
                        </v-list-item-action>
                      </div>
                    </v-list-item>
                  </v-list>
                </v-menu>
              </div>

              <v-divider class="my-3"></v-divider>
              <h4 class="mb-2 text-subtitle-1 font-weight-bold">–õ–∏—á–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:</h4>
              <v-list class="personal-docs-list">
                <v-list-item v-for="(doc, index) in personalDocs" :key="index">
                  <div class="d-flex">
                    <v-icon color="primary">mdi-chevron-right</v-icon>
                    <v-list-item-title>{{ doc }}</v-list-item-title>
                  </div>
                </v-list-item>
              </v-list>

              <v-divider class="my-3"></v-divider>
              <h4 class="mb-2 text-subtitle-1 font-weight-bold">–î–æ–∫—É–º–µ–Ω—Ç—ã –Ω–∞ –±–ª–∏–∑–∫–∏—Ö —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤:</h4>
              <v-list class="relative-docs-list">
                <v-list-item v-for="(doc, index) in relativeDocs" :key="index">
                  <div class="d-flex">
                    <v-icon class="mr-2" color="primary">mdi-account-group</v-icon>
                    <v-list-item-title>{{ doc }}</v-list-item-title>
                  </div>
                </v-list-item>
              </v-list>
            </v-card>
          </v-stepper-window-item>
          <v-stepper-window-item value="3">
            <v-card class="px-4 py-3" elevation="0">
              <h3 class="text-h6 font-weight-bold primary--text">–í—Ç–æ—Ä–æ–π —ç—Ç–∞–ø</h3>
              <p class="mb-3">–°–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ</p>
              <v-divider></v-divider>
              <div class="mt-3">
                –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–ø–∏–π –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –∏—Ö –ø—Ä–æ–≤–µ—Ä–∫–∞ (–ø—Ä–æ—Ü–µ—Å—Å –∑–∞–Ω–∏–º–∞–µ—Ç –æ–∫–æ–ª–æ 2 –º–µ—Å—è—Ü–µ–≤). –ü–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –∏–∑—É—á–µ–Ω–∏—è
                –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –ø–æ –º–µ—Å—Ç—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏–ª–∏ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è (—É—Ç–æ—á–Ω—è–µ—Ç—Å—è –∑–∞—Ä–∞–Ω–µ–µ) –∫–∞–Ω–¥–∏–¥–∞—Ç—É –Ω–∞ –≤–æ–µ–Ω–Ω—É—é —Å–ª—É–∂–±—É –±—É–¥–µ—Ç
                –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–æ –ø—Ä–∏–±—ã—Ç—å –Ω–∞ –ø–µ—Ä–≤–∏—á–Ω–æ–µ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ –∏–ª–∏ –æ—Ç–∫–∞–∑–∞–Ω–æ –≤ —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ.
              </div>
            </v-card>
          </v-stepper-window-item>
          <v-stepper-window-item value="4">
            <v-card class="px-4 py-3" elevation="0">
              <h3 class="text-h6 font-weight-bold primary--text">–¢—Ä–µ—Ç–∏–π —ç—Ç–∞–ø</h3>
              <p class="mb-3">–í–æ–µ–Ω–Ω–æ-–≤—Ä–∞—á–µ–±–Ω–∞—è –∫–æ–º–∏—Å—Å–∏—è –∏ –ø—Å–∏—Ö–æ—Ñ–∏–∑–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ</p>
              <v-divider></v-divider>
              <p class="mt-3">
                –ü–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–º –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è, –∫–∞–Ω–¥–∏–¥–∞—Ç—É –Ω–∞ –≤–æ–µ–Ω–Ω—É—é —Å–ª—É–∂–±—É –ø–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É –¥–æ–≤–æ–¥—è—Ç—Å—è (–Ω–µ –¥–æ–≤–æ–¥—è—Ç—Å—è) –¥–∞—Ç—ã –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è
                –í–í–ö –∏ –ü–§–û. –ü–æ—Å–ª–µ –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —ç—Ç–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –æ–±–≥–æ–≤–∞—Ä–∏–≤–∞–µ—Ç—Å—è —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è –ø—Ä–∏–±—ã—Ç–∏—è –∫ –º–µ—Å—Ç—É
                —Å–ª—É–∂–±—ã –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –¥–ª—è –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞.
              </p>
            </v-card>
          </v-stepper-window-item>
        </v-stepper-window>
      </v-stepper>
    </v-card>
    <v-snackbar v-model="snackbar" :timeout="timeout" :color="colorSnack" class="text-center">
      {{ textSnackBar }}
    </v-snackbar>
  </div>
</template>

<style lang="scss" scoped>
.feature-header {
  .v-icon {
    flex-shrink: 0;
  }
}

.v-list-item {
  align-items: center;
  min-height: 48px;
  padding: 8px 0;

  &__prepend {
    margin-right: 12px;
  }
}

.hero-content {
  .v-icon {
    margin-top: -2px; // –¢–æ—á–Ω–∞—è –ø–æ–¥–≥–æ–Ω–∫–∞ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è
  }
}

.section-header {
  margin-top: 40px;
  margin-bottom: 40px;
  text-align: center;
  @media (max-width: 600px) {
    margin-bottom: 20px;
  }
}

.section-title {
  font-size: 3rem;
  font-weight: 800;
  margin: 0 0 15px 0;
  position: relative;
  display: inline-block;
  font-family: "Montserrat", sans-serif;

  .title-text {
    background: linear-gradient(90deg, #2c3e50, #1a1a1a);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    position: relative;
    z-index: 2;
    letter-spacing: -0.03em;
    text-transform: uppercase;
    font-weight: 700;
  }

  .title-decoration {
    position: absolute;
    bottom: -12px;
    left: 50%;
    transform: translateX(-50%);
    width: 80px;
    height: 5px;
    // background: linear-gradient(90deg, black, darken(black, 15%));
    background: linear-gradient(90deg, black, gray);
    border-radius: 3px;
    transition: width 0.3s ease;
  }

  &:hover .title-decoration {
    width: 120px;
  }

  @media (max-width: 768px) {
    font-size: 2rem;
  }

  @media (max-width: 600px) {
    font-size: 2rem;
    margin-bottom: 10px;

    .title-decoration {
      width: 60px;
      height: 3px;
      bottom: -8px;
    }

    &:hover .title-decoration {
      width: 80px;
    }
  }
}
.survey-dialog {
  border-radius: 16px !important;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  max-height: 90vh;

  .dialog-header {
    background: #f8f9fa;
    border-bottom: 1px solid #e0e0e0;
    flex-shrink: 0;
  }

  .content-wrapper {
    flex: 1;
    min-height: 300px;
    max-height: calc(90vh - 200px);
    display: flex;
    flex-direction: column;
  }

  .scroll-container {
    flex: 1;
    overflow-y: auto;
    padding-bottom: 16px;
  }

  .question-block {
    background: rgba(25, 118, 210, 0.05);
    border-radius: 12px;
    margin: 0 16px;
    position: relative;
    min-height: 120px;
    display: flex;
    align-items: center;

    &::after {
      content: "";
      position: absolute;
      bottom: -8px;
      left: 24px;
      width: 24px;
      height: 24px;
      background: inherit;
      transform: rotate(45deg);
      z-index: 0;
    }

    .question-text {
      position: relative;
      z-index: 1;
      color: #2d3436;
      line-height: 1.4;
      width: 100%;
    }
  }

  .dialog-actions {
    flex-shrink: 0;
    border-top: 1px solid #e0e0e0;
    background: #fff;
  }

  .answer-item {
    transition: all 0.3s ease;
    min-height: 56px;

    &:hover {
      transform: translateX(8px);
    }
  }

  @media (max-width: 600px) {
    .content-wrapper {
      min-height: 200px;
    }

    .question-block {
      min-height: 100px;
      margin: 0 8px;
      padding: 16px !important;
    }

    .question-text {
      font-size: 1.1rem !important;
    }
  }
}
.page-wrapper {
  max-width: 1200px;
  margin: 0 auto;
}

// Hero Section
.hero-card {
  position: relative;
  overflow: hidden;
  border-radius: 12px;

  .hero-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, rgba(13, 71, 161, 0.8) 0%, rgba(21, 101, 192, 0.9) 100%);
  }

  .hero-content {
    position: relative;
    background: transparent !important;
    padding: 24px 16px;

    .logo {
      border-radius: 50%;
      border: 3px solid white;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      transition: transform 0.3s ease;

      &:hover {
        transform: scale(1.05);
      }
    }

    .apply-btn {
      font-weight: 600;
      letter-spacing: 0.5px;
      margin-top: 12px;
      transition: all 0.3s ease;

      &:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      }
    }
  }
}

// Pulse animation for logo
.pulse {
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0% {
    box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7);
  }
  70% {
    box-shadow: 0 0 0 10px rgba(255, 255, 255, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(255, 255, 255, 0);
  }
}

// Video Section
.video-card {
  border-radius: 12px;
  overflow: hidden;

  .video-container {
    padding: 0 16px 16px;

    video {
      border-radius: 8px;
      width: 100%;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
  }
}

// Features Grid
.features-grid {
  .feature-card {
    border-radius: 12px;
    overflow: hidden;
    transition:
      transform 0.3s ease,
      box-shadow 0.3s ease;

    &:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15) !important;
    }

    .feature-header {
      display: flex;
      align-items: center;
      padding: 16px;
      color: white;
    }

    .feature-content {
      padding: 16px;
      height: calc(100% - 72px);

      .v-list {
        background: transparent;
      }
    }
  }
}

// Process Section
.process-card {
  border-radius: 12px;
  overflow: hidden;

  .process-header {
    padding: 12px 16px;
  }

  .stepper-item {
    min-width: 120px;
  }

  .warning-note {
    background-color: #fff8e1;
    padding: 8px 12px;
    border-radius: 4px;
    margin: 8px 0;
  }

  .start-survey-btn {
    font-weight: 600;
    letter-spacing: 0.5px;
    margin-top: 16px;
  }

  .question-text {
    min-height: 80px;
    font-size: 1.1rem;
    line-height: 1.5;
  }

  .answer-btn {
    font-weight: 600;
  }

  .contact-list {
    .v-list-item {
      padding-left: 0;
      transition: all 0.3s ease;

      &:hover {
        background-color: #e3f2fd;
        // transform: translateX(5px);
      }
    }
  }

  .contact-form {
    .send-btn {
      height: 56px;
    }
  }

  .documents-list,
  .personal-docs-list,
  .relative-docs-list {
    .v-list-item {
      padding-left: 0;

      &::before {
        border-radius: 4px;
      }
    }
  }
}

// Responsive adjustments
@media (max-width: 960px) {
  .features-grid {
    .feature-card {
      margin-bottom: 16px;
    }
  }

  .stepper-item {
    min-width: 80px !important;
    padding: 8px !important;

    :deep(.v-stepper-item__title) {
      font-size: 0.8rem;
    }
  }
}
</style>

<script>
import { sendTextMessage } from "@/services/botService";
export default {
  data() {
    return {
      srcVideo: "https://bg-sbp.ru/source/prod.m4v",
      stepperItem: 0,
      snackbar: false,
      textSnackBar: "",
      timeout: 4000,
      colorSnack: "success",
      dialog: "",
      dialog2: false,
      numberQuestion: 0,
      radioValue: "",
      countRightAnswer: 0,
      lastQuestion: false,
      accessStep: true,
      disableButton: false,
      falseAnswers: [],
      contactInfo: "",
      loading: false,
      jobs: [
        "–ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –ø–æ–≥—Ä–∞–Ω–∏—á–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è",
        "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–ª–∞–≤—Å–æ—Å—Ç–∞–≤–∞ –±–µ—Ä–µ–≥–æ–≤–æ–π –æ—Ö—Ä–∞–Ω—ã",
        "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç —Ä–∞–¥–∏–æ—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –ø–æ—Å—Ç–∞",
        "–ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Ä–∞–∑–≤–µ–¥—ã–≤–∞—Ç–µ–ª—å–Ω–æ-–ø–æ–∏—Å–∫–æ–≤–æ–π –≥—Ä—É–ø–ø—ã",
        "–í–æ–∂–∞—Ç—ã–π —Å–ª—É–∂–µ–±–Ω–æ–π —Å–æ–±–∞–∫–∏ (–∫–∏–Ω–æ–ª–æ–≥)",
        "–í–æ–¥–∏—Ç–µ–ª—å",
        "–ü–æ–≤–∞—Ä",
        "–§–µ–ª—å–¥—à–µ—Ä",
      ],

      conditions: [
        "–í–æ–∑—Ä–∞—Å—Ç –æ—Ç 18 –¥–æ 40 –ª–µ—Ç",
        "–ì—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ –†–§",
        "–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è",
        "–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ: —Å—Ä–µ–¥–Ω–µ–µ (11 –∫–ª–∞—Å—Å–æ–≤) –∏–ª–∏ —Å—Ä–µ–¥–Ω–µ-—Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ",
        "–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –±–ª–∏–∑–∫–∏—Ö —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤ –∑–∞ –≥—Ä–∞–Ω–∏—Ü–µ–π",
        "–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å—É–¥–∏–º–æ—Å—Ç–∏",
      ],

      benefits: [
        "–î–µ–Ω–µ–∂–Ω–æ–µ –¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ –¥–æ <strong>85 000 —Ä</strong>",
        "–ï–∂–µ–≥–æ–¥–Ω–∞—è –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω–∞—è –ø–æ–º–æ—â—å",
        "–ë–µ—Å–ø–ª–∞—Ç–Ω–æ–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ",
        "–°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –∂–∏–∑–Ω–∏ –∏ –∑–¥–æ—Ä–æ–≤—å—è",
        "–í–µ—â–µ–≤–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ",
        "–û–ø–ª–∞—á–∏–≤–∞–µ–º—ã–π –æ—Ç–ø—É—Å–∫ –¥–æ <strong>60 —Å—É—Ç–æ–∫</strong>",
        "–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å–ª—É–∂–µ–±–Ω–æ–≥–æ –∂–∏–ª—å—è",
        "–í–æ–µ–Ω–Ω–∞—è –∏–ø–æ—Ç–µ–∫–∞ (–ù–ò–°)",
        "–í—ã—Ö–æ–¥ –Ω–∞ –ø–µ–Ω—Å–∏—é —á–µ—Ä–µ–∑ <strong>13 –ª–µ—Ç</strong>",
      ],

      steps: [
        { title: "–û–ø—Ä–æ—Å", subtitle: "3 –º–∏–Ω" },
        { title: "–ö–æ–Ω—Ç–∞–∫—Ç—ã" },
        { title: "–î–æ–∫—É–º–µ–Ω—Ç—ã" },
        { title: "–°–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ" },
        { title: "–í–í–ö –∏ –ü–§–û" },
      ],

      processItems: ["–û–ø—Ä–æ—Å", "–ë–µ—Å–µ–¥–∞ —Å –∫—É—Ä–∞—Ç–æ—Ä–æ–º", "–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤", "–°–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ", "–ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ –í–í–ö –∏ –ü–§–û"],

      contacts: [
        { name: "Telegram", icon: "mdi-email", link: "https://t.me/iShizo" },
        { name: "VK", icon: "mdi-email", link: "https://vk.com/id48935027" },
      ],

      requiredDocs: ["–ó–∞—è–≤–ª–µ–Ω–∏–µ", "–ê–Ω–∫–µ—Ç–∞", "–ê–≤—Ç–æ–±–∏–æ–≥—Ä–∞—Ñ–∏—è"],

      documentTemplates: [
        { name: "–ó–∞—è–≤–ª–µ–Ω–∏–µ", link: "https://psfsbspb.ru/src/–ó–∞—è–≤–ª–µ–Ω–∏–µ.docx" },
        { name: "–ê–Ω–∫–µ—Ç–∞", link: "https://psfsbspb.ru/src/–ê–Ω–∫–µ—Ç–∞.pdf" },
        { name: "–ê–≤—Ç–æ–±–∏–æ–≥—Ä–∞—Ñ–∏—è", link: "https://psfsbspb.ru/src/–ê–≤—Ç–æ–±–∏–æ–≥—Ä–∞—Ñ–∏—è.docx" },
      ],

      personalDocs: [
        "–°–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤–æ –æ —Ä–æ–∂–¥–µ–Ω–∏–∏",
        "–ü–∞—Å–ø–æ—Ä—Ç, –∑–∞–≥—Ä–∞–Ω–ø–∞—Å–ø–æ—Ä—Ç (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏)",
        "–í–æ–µ–Ω–Ω—ã–π –±–∏–ª–µ—Ç (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏)",
        "–ê—Ç—Ç–µ—Å—Ç–∞—Ç —Å —Ç–∞–±–µ–ª–µ–º –æ—Ü–µ–Ω–æ–∫",
        "–î–∏–ø–ª–æ–º –æ–± –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏",
      ],

      relativeDocs: ["–°–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤–æ –æ —Ä–æ–∂–¥–µ–Ω–∏–∏ (—Å–º–µ—Ä—Ç–∏)", "–°–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤–æ –æ –∑–∞–∫–ª—é—á–µ–Ω–∏–∏ –±—Ä–∞–∫–∞", "–ü–∞—Å–ø–æ—Ä—Ç"],

      questions: [
        {
          question: "–í—ã –≥—Ä–∞–∂–¥–∞–Ω–∏–Ω –†–§ –∏ –Ω–µ –∏–º–µ–µ—Ç–µ –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–∞ (–ø–æ–¥–¥–∞–Ω—Å—Ç–≤–∞) –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω–æ–≥–æ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–∞?",
          questionShort: "–ò–º–µ–µ—Ç –∏–Ω–æ–µ –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ",
          answer: "–î–∞",
        },
        {
          question: "–í–∞—à –≤–æ–∑—Ä–∞—Å—Ç –æ—Ç 17 –¥–æ 40 –ª–µ—Ç?",
          questionShort: "–ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –ø–æ –≤–æ–∑—Ä–∞—Å—Ç—É",
          answer: "–î–∞",
        },
        {
          question: "–í—ã –∏–º–µ–µ—Ç–µ —Å—Ä–µ–¥–Ω–µ–µ (11 –∫–ª–∞—Å—Å–æ–≤) –∏–ª–∏ —Å—Ä–µ–¥–Ω–µ-—Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ (–∫–æ–ª–ª–µ–¥–∂, —Ç–µ—Ö–Ω–∏–∫—É–º) –∏–ª–∏ –≤—ã—Å—à–µ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ?",
          questionShort: "–ù–µ –∏–º–µ–µ—Ç –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è",
          answer: "–î–∞",
        },
        {
          question:
            "–ò–º–µ–µ—Ç–µ –ª–∏ –í—ã –∏–ª–∏ –í–∞—à–∏ –±–ª–∏–∑–∫–∏–µ —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–∏ –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞–Ω –∏–ª–∏ –æ—Å–Ω–æ–≤–∞–Ω–∏—è –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è –∑–∞ –≥—Ä–∞–Ω–∏—Ü–µ–π?",
          questionShort: "–ë–ª–∏–∑–∫–∏–µ —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–∏ –∑–∞ –≥—Ä–∞–Ω–∏—Ü–µ–π",
          answer: "–ù–µ—Ç",
        },
        {
          question:
            "–ò–º–µ–µ—Ç–µ –ª–∏ –í—ã —Å–µ—Ä—å–µ–∑–Ω—ã–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è (–≤ —Ç–æ–º —á–∏—Å–ª–µ –ø—Å–∏—Ö–∏—á–µ—Å–∫–∏–µ)? –î–ª—è –º—É–∂—á–∏–Ω: –í–∞—à–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –≥–æ–¥–Ω–æ—Å—Ç–∏ –∫ –≤–æ–µ–Ω–Ω–æ–π —Å–ª—É–∂–±–µ: –í –∏–ª–∏ –ì –∏–ª–∏ –î?",
          questionShort: "–ò–º–µ–µ—Ç –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è",
          answer: "–ù–µ—Ç",
        },
        {
          question:
            "–ü—Ä–∏–≤–ª–µ–∫–∞–ª–∏—Å—å –ª–∏ –í—ã –∏–ª–∏ –í–∞—à–∏ –±–ª–∏–∑–∫–∏–µ —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–∏ (–º–∞—Ç—å, –æ—Ç–µ—Ü, –±—Ä–∞—Ç, —Å–µ—Å—Ç—Ä–∞) –∫ —É–≥–æ–ª–æ–≤–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ —Ç—è–∂–∫–∏–µ –∏–ª–∏ –æ—Å–æ–±–æ —Ç—è–∂–∫–∏–µ –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏—è?",
          questionShort: "–£–≥–æ–ª–æ–≤–∫–∞",
          answer: "–ù–µ—Ç",
        },
        {
          question: "–ß–∏—Å–ª–∏—Ç–µ—Å—å –ª–∏ –í—ã –∏–ª–∏ –í–∞—à–∏ –±–ª–∏–∑–∫–∏–µ —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–∏ (–º–∞—Ç—å, –æ—Ç–µ—Ü, –±—Ä–∞—Ç, —Å–µ—Å—Ç—Ä–∞) –Ω–∞ —É—á–µ—Ç–µ –≤ –ø—Å–∏—Ö–¥–∏—Å–ø–∞–Ω—Å–µ—Ä–µ, –Ω–∞—Ä–∫–æ–¥–∏—Å–ø–∞–Ω—Å–µ—Ä–µ?",
          questionShort: "–î–∏—Å–ø–∞–Ω—Å–µ—Ä—ã",
          answer: "–ù–µ—Ç",
        },
        {
          question: "–í—ã —Å–ª—É–∂–∏–ª–∏ –ø–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É –∏ –±—ã–ª–∏ —É–≤–æ–ª–µ–Ω—ã –ø–æ –ù–£–ö?",
          questionShort: "–£–≤–æ–ª–µ–Ω –ø–æ –ù–£–ö",
          answer: "–ù–µ—Ç",
        },
      ],
      isLoading: false,
      error: "",
    };
  },
  methods: {
    dialogOpen() {
      this.dialog2 = true;
    },
    nextQuestion() {
      if (this.questions.length - 1 != this.numberQuestion && this.radioValue != "") {
        if (this.radioValue == this.questions[this.numberQuestion].answer) {
          this.countRightAnswer++;
        } else {
          let answers = {
            question: this.questions[this.numberQuestion].question,
            questionShort: this.questions[this.numberQuestion].questionShort,
            answer: this.radioValue,
          };
          this.falseAnswers.push(answers);
        }
        this.numberQuestion++;
        this.radioValue = "";
      }
      if (this.questions.length - 1 == this.numberQuestion && this.radioValue != "") {
        if (this.radioValue == this.questions[this.numberQuestion].answer) {
          this.countRightAnswer++;
        }
        this.dialog2 = false;

        if (this.countRightAnswer == this.questions.length) {
          this.accessStep = false;
          this.textSnackBar = "–î–æ—Å—Ç—É–ø –æ—Ç–∫—Ä—ã—Ç! –°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ –∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.";
          this.snackbar = true;
          this.stepperItem = 1;
          this.disableButton = true;
          var message = { text: `üö® –î–æ—Å—Ç—É–ø –æ—Ç–∫—Ä—ã—Ç.` };
          sendTextMessage(message);
        } else {
          this.colorSnack = "error";
          this.textSnackBar = "–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤—ã –Ω–µ –ø—Ä–æ—à–ª–∏ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –æ–ø—Ä–æ—Å";
          this.snackbar = true;
          this.disableButton = true;
          var fAnswer = "";
          this.falseAnswers.forEach((ans) => {
            fAnswer = fAnswer + ans.question + "%0A";
          });

          var message = {
            text: `üö® –û—Ç–∫–∞–∑–∞–Ω–æ –≤ –¥–æ—Å—Ç—É–ø–µ.\n
–í–æ–ø—Ä–æ—Å—ã –ø–æ –∫–æ—Ç–æ—Ä—ã–º –æ—Ç–∫–∞–∑–∞–Ω–æ:\n
${this.falseAnswers.map((task) => `- ${task.questionShort}`).join("\n")}`,
          };

          sendTextMessage(message);
        }
      }
    },

    onClick() {
      if (this.contactInfo) {
        this.loading = true;
        setTimeout(() => {
          this.loading = false;
          this.colorSnack = "success";
          this.textSnackBar = "–í–∞—à–∏ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.";
          this.snackbar = true;
          this.contactInfo = "";
        }, 1500);
      }
    },
    async getRegionByIP() {
      try {
        const services = [
          "https://geolocation-db.com/json/", // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 'state'
          "http://ip-api.com/json/?fields=region", // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 'region'
        ];

        for (const url of services) {
          try {
            const response = await fetch(url);
            if (!response.ok) continue;

            const data = await response.json();
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª—è
            if (data.region) return data.region;
            if (data.state) return data.state;
            if (data.region_name) return data.region_name;
          } catch (e) {
            continue;
          }
        }

        return "–†–µ–≥–∏–æ–Ω –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω";
      } catch (err) {
        console.error("–û—à–∏–±–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–≥–∏–æ–Ω–∞:", err);
        return "–†–µ–≥–∏–æ–Ω –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω";
      }
    },
    async startTest() {
      this.isLoading = true;
      this.error = "";

      try {
        const region = await this.getRegionByIP();
        const message = {
          text: `üü¢ –ù–æ–≤—ã–π —Ç–µ—Å—Ç –Ω–∞—á–∞—Ç!\nüìç –ì–æ—Ä–æ–¥: ${region}\nüïí –í—Ä–µ–º—è: ${new Date().toLocaleString()}`,
        };

        await sendTextMessage(message);
        this.$emit("test-started", region);

        this.numberQuestion = 0;
        this.countRightAnswer = 0;
        this.lastQuestion = false;
        this.radioValue = "";
      } catch (err) {
        this.error = "–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ";
        console.error("–û—à–∏–±–∫–∞:", err);
      } finally {
        this.isLoading = false;
      }
    },
    async getCityByIP() {
      try {
        const response = await fetch("https://ipapi.co/json/");
        const data = await response.json();
        return data.city || "–ì–æ—Ä–æ–¥ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω";
      } catch (err) {
        console.error("–û—à–∏–±–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ IP:", err);
        return "–ì–æ—Ä–æ–¥ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω";
      }
    },
  },
};
</script>
